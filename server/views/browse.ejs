<%- include('head', { title: "Craft for a Cause" }); %>
<%- include('nav', { user: user }); %>

    <style type="text/css">
    .tabs .indicator {
        /* "teal accent-3" */
        background-color: #1de9b6;
    }
    </style>

    <div class="parallax-container">
        <div class="parallax"><img src="img/ggol.gif"></div>
    </div>

    <div class="row">
        <div class="col s12 teal lighten-1">
            <ul class="tabs teal lighten-1">
                <li class="tab col s3 teal lighten-2"><a class="white-text" href="#browse_products">Products</a></li>
                <li class="tab col s3 teal lighten-2"><a class="white-text" href="#browse_communities">Communities</a></li>
            </ul>
        </div>
        <div id="browse_products" class="col s12">
            <div class="container">
                <div class="row">
                    <div class="col s12" >
                        <h4>Find Products</h4>
    
                        <div class="input-field col s6 s12 teal-text">
                            <i class="teal-text material-icons prefix">search</i>
                            <!-- todo autocomplete results -->
                            <input type="text" placeholder="search" id="search-product" class="autocomplete teal-text">
                        </div>

                        <div id="product-search-results">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="browse_communities" class="col s12">
            <div class="container">
                <div class="row">
                    <div class="col s12" >
                        <h4>Find Communities</h4>
    
                        <div class="input-field col s6 s12 teal-text">
                            <i class="teal-text material-icons prefix">search</i>
                            <!-- todo autocomplete results -->
                            <input type="text" placeholder="search" id="search-community" class="autocomplete teal-text" >
                        </div>

                        <div id="community-search-results">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- /each page specific code.ejs -->
<!-- end -->


    <%- include('page_scripts'); %>
    <script>
        $(document).ready(function(){
            $('ul.tabs').tabs();
            $('.parallax').parallax();

            $('#search-product').on("keyup paste", (e) => {
                var userSearch = $(this).val();
                $.post("/product/search", {searchTerm: userSearch}, (products) => {
                    $("#product-search-results").text("number of results: " + products.length);
                }).fail(() => {
                    Materialize.toast("search error!");
                    console.log("search error!");
                });
            });
            $('#search-community').on("keyup paste", (e) => {
                var userSearch = $(this).val();
                $.post("/community/search", {searchTerm: userSearch}, (communities) => {
                    $("#community-search-results").text("number of results: " + communities.length);
                }).fail(() => {
                    Materialize.toast("search error!");
                    console.log("search error!");
                });
            });
        });
    </script>
<%- include('foot'); %>
